<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../ajax-state/ajax-state.html">
<link rel="import" href="../error-display/error-display.html">

<polymer-element name="power-log" attributes="vmid">
  <template>
    <link rel="stylesheet" type="text/css" href="/static/vimma/components/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="power-log.css">

    <ajax-state id="ajax"></ajax-state>

    <div>
      <template if="{{apiPage == null && $.ajax.inProgress}}">
        Loading…
      </template>

      <template if="{{apiPage != null}}">
        <template bind ref="main"></template>
      </template>

      <template if="{{!$.ajax.inProgress && !$.ajax.success}}">
        <error-display text={{$.ajax.errorText}}></error-display>
      </template>
    </div>

    <template id="main">
      <div id="navigation">
        <button type="button" on-click="{{loadOlder}}"
          disabled?="{{$.ajax.inProgress || !apiPage.next}}">
          ← older
        </button>
        <span id="nav-expand">
          <button type="button" on-click="{{reload}}"
            disabled?="{{$.ajax.inProgress}}">
            <span id="reload-glyph" class="glyphicon glyphicon-refresh"></span>
            Reload
          </button>
          <input id="samples-chk" type="checkbox"
            checked="{{showOnlyTransitions}}">
          <label for="samples-chk">
            show only transitions
          </label>
        </span>
        <button type="button" on-click="{{loadNewer}}"
          disabled?="{{$.ajax.inProgress || !apiPage.previous}}">
          newer →
        </button>
      </div>
      <div id="container"></div>
    </template>
  </template>

  <script src="power-log.js"></script>
</polymer-element>
