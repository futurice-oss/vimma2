<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../schedule-list/schedule-list.html">
<link rel="import" href="../projects-tab/projects-tab.html">
<link rel="import" href="../vms-tab/vms-tab.html">
<link rel="import" href="../audit-display/audit-display.html">
<link rel="import" href="../ajax-frag-history/ajax-frag-history.html">
<link rel="import" href="../ajax-frag-splitter/ajax-frag-splitter.html">

<polymer-element name="index-elem">
  <template>
    <!-- Otherwise bootstrap styles don't get applied from the main document.
      Can't get PolymerJS to use a (model) variable in the href. -->
    <link rel="stylesheet" type="text/css" href="/static/vimma/components/bower_components/bootstrap/dist/css/bootstrap.min.css">

    <ajax-frag-history id="ajaxHist" frag="{{frag}}"></ajax-frag-history>
    <ajax-frag-splitter id="ajaxFrag" frag="{{frag}}">
    </ajax-frag-splitter>

    <nav class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="">Vimma</a>
        </div>

        <div>
          <ul class="nav navbar-nav" on-click="{{navClicked}}">
            <template repeat="{{tab in tabs}}">
              <li class="{{ {active: tab.key == $.ajaxFrag.head} | tokenList}}">
                <a href="{{tab.url}}">
                  {{tab.title}}
                </a>
              </li>
            </template>
          </ul>
        </div>
      </div>
    </nav>

    <template if="{{$.ajaxFrag.head == tabs[0].key}}">
      <vms-tab frag="{{$.ajaxFrag.tail}}"></vms-tab>
    </template>

    <template if="{{$.ajaxFrag.head == tabs[1].key}}">
      <projects-tab frag="{{$.ajaxFrag.tail}}"></projects-tab>
    </template>

    <template if="{{$.ajaxFrag.head == tabs[2].key}}">
      <schedule-list></schedule-list>
    </template>

    <template if="{{$.ajaxFrag.head == tabs[3].key}}">
      <audit-display></audit-display>
    </template>
  </template>

  <script src="index-elem.js"></script>
</polymer-element>
